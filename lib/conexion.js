/*
   - Código realizado por: DevAlexJs
   - github.com/DevAlexJs
*/

const _0xc0697a=_0x2a36;(function(_0x31be4e,_0x357385){const _0x460cb9=_0x2a36,_0x167279=_0x31be4e();while(!![]){try{const _0x2c4ba3=parseInt(_0x460cb9(0x21c))/0x1+-parseInt(_0x460cb9(0x20b))/0x2*(parseInt(_0x460cb9(0x1da))/0x3)+parseInt(_0x460cb9(0x1f2))/0x4+parseInt(_0x460cb9(0x207))/0x5+-parseInt(_0x460cb9(0x220))/0x6+parseInt(_0x460cb9(0x1e8))/0x7*(-parseInt(_0x460cb9(0x1f3))/0x8)+parseInt(_0x460cb9(0x20d))/0x9;if(_0x2c4ba3===_0x357385)break;else _0x167279['push'](_0x167279['shift']());}catch(_0x29670b){_0x167279['push'](_0x167279['shift']());}}}(_0xf1ad,0x48fcb));import{DisconnectReason,useMultiFileAuthState,fetchLatestBaileysVersion,makeCacheableSignalKeyStore,jidNormalizedUser,Browsers,makeWASocket}from'@whiskeysockets/baileys';import _0x3cfa7b from'fs';import _0x4e5da6 from'chalk';import _0x3615b9 from'pino';import _0x1d24ef from'path';import{fileURLToPath}from'url';import _0x40f69e from'qrcode';import _0x2143c4 from'node-cache';import _0x41354a from'./store.js';import{handler,participantsUpdate,groupsUpdate}from'../handler.js';const __filename=fileURLToPath(import.meta[_0xc0697a(0x1f0)]),__dirname=_0x1d24ef['dirname'](__filename),JADIBTS_DIR=_0x1d24ef[_0xc0697a(0x1f7)](__dirname,_0xc0697a(0x209)+jadi);globalThis[_0xc0697a(0x1fe)]=globalThis['conns']||[];const msgRetryCounterCache=new _0x2143c4({'stdTTL':0x12c,'checkperiod':0x3c}),userDevicesCache=new _0x2143c4({'stdTTL':0x12c,'checkperiod':0x3c}),groupCache=new _0x2143c4({'stdTTL':0x708,'checkperiod':0x258});let reintentos={};export async function startSub(){const _0x513fdf=_0xc0697a;try{if(!_0x3cfa7b['existsSync'](JADIBTS_DIR)){console[_0x513fdf(0x1f4)](_0x4e5da6[_0x513fdf(0x21e)][_0x513fdf(0x211)][_0x513fdf(0x1e1)]('WARNING:')+'\x20'+_0x4e5da6[_0x513fdf(0x21e)][_0x513fdf(0x22d)](_0x513fdf(0x215)));return;}const _0x12e4d9=_0x3cfa7b['readdirSync'](JADIBTS_DIR);for(const _0x366caf of _0x12e4d9){await startSubBotIfValid(_0x366caf);}}catch(_0x586d17){console[_0x513fdf(0x1db)](_0x513fdf(0x1f9),_0x586d17);}}function _0xf1ad(){const _0x22f661=['sendMessage','?update=','Conéctate\x20con\x20este\x20código','fstop','open','utf-8','467499OKviUu','connectionClosed','bold','filter','1932528nrmVHR','../handler.js','payload','key','wss://web.whatsapp.com/ws/chat?ED=CAIICA','Iniciando\x20sub-bot\x20','handler','connection.update','readFileSync','jid','[\x20✿\x20]\x20\x20Error\x20procesando\x20group-participants.update:','creds.json','loadMessage','cyanBright','timedOut','creds','user','24108MKLKBk','error','isInit','groups.update','Desktop','connectionLost','catch','bgRed','match','No\x20hay\x20credenciales\x20para\x20','Desconocido','push','group-participants.update','parse','80682YYZqgU','Error\x20al\x20conectar\x20','authState','keys','[Código\x20Error]','[\x20✿\x20]\x20\x20Error\x20procesando\x20groups.update:','close','Error\x20al\x20iniciar\x20sub-bot\x20','url','Error\x20en\x20el\x20handler:','143828qhuRIB','232rCQpyE','log','Por\x20favor\x20escanea\x20el\x20código\x20QR','now','join',',\x20eliminando\x20la\x20sesión.','Error\x20en\x20startSub:','includes','userId','\x20conectado\x20correctamente','message','conns','rmdirSync','chat','bind','remoteJid','INFO:','bgGreen','Intentando\x20reconectar\x20a\x20','https://files.catbox.moe/re5wkq.jpg','508830LPwsCY','chatId','../','phone','84zdbqzL',',\x20se\x20eliminará\x20la\x20sesión.','6188283zJmXwt','requestPairingCode','existsSync','toBuffer','whiteBright','WARNING:','silent','output','No\x20hay\x20sub-bots\x20previamente\x20conectados'];_0xf1ad=function(){return _0x22f661;};return _0xf1ad();}async function startSubBotIfValid(_0x56805c){const _0x3f8b1a=_0xc0697a;try{const _0x7345e7=_0x1d24ef[_0x3f8b1a(0x1f7)](JADIBTS_DIR,_0x56805c,'creds.json');if(!_0x3cfa7b[_0x3f8b1a(0x20f)](_0x7345e7)){console[_0x3f8b1a(0x1f4)](_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x211)][_0x3f8b1a(0x1e1)](_0x3f8b1a(0x212))+'\x20'+_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x22d)](_0x3f8b1a(0x1e3)+_0x56805c));return;}const _0x335d4d=_0x3cfa7b['readFileSync'](_0x7345e7,'utf-8'),_0x394b87=JSON[_0x3f8b1a(0x1e7)](_0x335d4d);if(_0x394b87[_0x3f8b1a(0x219)]){console[_0x3f8b1a(0x1f4)](_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x211)][_0x3f8b1a(0x1e1)](_0x3f8b1a(0x212))+'\x20'+_0x4e5da6['bold'][_0x3f8b1a(0x22d)]('Sub-bot\x20'+_0x56805c+'\x20marcado\x20para\x20no\x20iniciar\x20(fstop)'));return;}console[_0x3f8b1a(0x1f4)](_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x211)][_0x3f8b1a(0x204)](_0x3f8b1a(0x203))+'\x20'+_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x22d)](_0x3f8b1a(0x225)+_0x56805c)),await startSubBotInstance(_0x56805c,_0x335d4d);}catch(_0x54824e){console['error'](_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x211)][_0x3f8b1a(0x1e1)]('WARNING:')+'\x20'+_0x4e5da6[_0x3f8b1a(0x21e)][_0x3f8b1a(0x22d)](_0x3f8b1a(0x1ef)+_0x56805c));}}async function startSubBotInstance(_0x48399e,_0x47e20a){const _0x331d68=_0xc0697a,_0x24e13c=_0x1d24ef[_0x331d68(0x1f7)](JADIBTS_DIR,_0x48399e),{state:_0x2094b7,saveState:_0x2c0324}=await useMultiFileAuthState(_0x24e13c),_0x376d03=makeCacheableSignalKeyStore(_0x2094b7[_0x331d68(0x1eb)],_0x3615b9({'level':_0x331d68(0x213)})),{version:_0x416fac}=await fetchLatestBaileysVersion(),_0x4c7287={'auth':{'creds':_0x2094b7[_0x331d68(0x22f)],'keys':_0x376d03},'waWebSocketUrl':_0x331d68(0x224),'logger':_0x3615b9({'level':'silent'}),'browser':Browsers['macOS'](_0x331d68(0x1de)),'markOnlineOnConnect':!![],'generateHighQualityLinkPreview':!![],'getMessage':async _0x55e0a5=>{const _0xf8214d=_0x331d68,_0xe4ac86=jidNormalizedUser(_0x55e0a5[_0xf8214d(0x202)]);return await _0x41354a[_0xf8214d(0x22c)](_0xe4ac86,_0x55e0a5['id'])?.[_0xf8214d(0x1fd)]||'';},'version':_0x416fac};let _0x4263c7=makeWASocket(_0x4c7287);_0x4263c7['isInit']=![],_0x4263c7['ev']['on'](_0x331d68(0x227),_0x59b38a=>handleConnectionUpdate(_0x4263c7,_0x59b38a,_0x48399e)),setInterval(async()=>{const _0x3ca1b2=_0x331d68;if(!_0x4263c7[_0x3ca1b2(0x230)])try{_0x4263c7['ws']['close'](),_0x4263c7['ev']['removeAllListeners'](),globalThis[_0x3ca1b2(0x1fe)]=globalThis[_0x3ca1b2(0x1fe)][_0x3ca1b2(0x21f)](_0x236308=>_0x236308!==_0x4263c7);}catch{}},0xea60),await loadHandler(_0x4263c7),console[_0x331d68(0x1f4)](_0x4e5da6[_0x331d68(0x21e)]['whiteBright'][_0x331d68(0x204)](_0x331d68(0x203))+'\x20'+_0x4e5da6[_0x331d68(0x21e)][_0x331d68(0x22d)](_0x48399e+'\x20conectado\x20con\x20éxito')),globalThis['conns'][_0x331d68(0x1e5)](_0x4263c7);}function _0x2a36(_0x12c987,_0x4c27f1){const _0xf1ad1b=_0xf1ad();return _0x2a36=function(_0x2a361e,_0x2eb957){_0x2a361e=_0x2a361e-0x1da;let _0x4f0b7c=_0xf1ad1b[_0x2a361e];return _0x4f0b7c;},_0x2a36(_0x12c987,_0x4c27f1);}async function handleConnectionUpdate(_0x4d6037,_0x3d989b,_0x55e23f){const _0x4abf58=_0xc0697a,{connection:_0x12034a,lastDisconnect:_0x294875,isNewLogin:_0x4dc9d4,qr:_0xa1be06}=_0x3d989b;_0x4dc9d4&&(_0x4d6037[_0x4abf58(0x1dc)]=![]);if(_0x12034a===_0x4abf58(0x1ee))await handleDisconnect(_0x294875,_0x4d6037,_0x55e23f);else _0x12034a===_0x4abf58(0x21a)&&(_0x4d6037[_0x4abf58(0x1dc)]=!![],console[_0x4abf58(0x1f4)](_0x4e5da6[_0x4abf58(0x21e)]['whiteBright'][_0x4abf58(0x204)](_0x4abf58(0x203))+'\x20'+_0x4e5da6[_0x4abf58(0x21e)][_0x4abf58(0x22d)](_0x55e23f+_0x4abf58(0x1fc))));_0xa1be06&&await handleQRCode(_0xa1be06,_0x4d6037,_0x55e23f);}async function handleDisconnect(_0x547310,_0x15972e,_0x54a86f){const _0x44609d=_0xc0697a,_0xb929d9=_0x547310?.[_0x44609d(0x1db)]?.['output']?.['statusCode']||_0x547310?.[_0x44609d(0x1db)]?.[_0x44609d(0x214)]?.[_0x44609d(0x222)]?.['statusCode'];if([DisconnectReason['badSession'],0x194,0x193,0x195,0x191,DisconnectReason['loggedOut']][_0x44609d(0x1fa)](_0xb929d9))console[_0x44609d(0x1f4)](_0x4e5da6['bold'][_0x44609d(0x211)]['bgRed']('WARNING:')+'\x20'+_0x4e5da6['bold'][_0x44609d(0x22d)]('Conexión\x20cerrada\x20para\x20'+_0x54a86f+_0x44609d(0x20c))),_0x3cfa7b['rmSync'](_0x1d24ef[_0x44609d(0x1f7)](JADIBTS_DIR,_0x54a86f),{'recursive':!![]});else[0x1ac,DisconnectReason[_0x44609d(0x22e)],DisconnectReason[_0x44609d(0x21d)],DisconnectReason[_0x44609d(0x1df)],0x1b8,0x198][_0x44609d(0x1fa)](_0xb929d9)?(console[_0x44609d(0x1f4)]('\x0a'+_0x4e5da6['bold']['whiteBright'][_0x44609d(0x1e1)](_0x44609d(0x212))+'\x20'+_0x4e5da6[_0x44609d(0x21e)][_0x44609d(0x22d)](_0x44609d(0x205)+_0x54a86f+'...')),await restartSubBot(_0x15972e,_0x54a86f)):(console[_0x44609d(0x1f4)](_0x4e5da6[_0x44609d(0x21e)][_0x44609d(0x211)]['bgRed'](_0x44609d(0x212))+'\x20'+_0x4e5da6[_0x44609d(0x21e)][_0x44609d(0x22d)](_0x54a86f+'\x20desconectado\x20por\x20razón\x20desconocida:\x20'+_0xb929d9)),await restartSubBot(_0x15972e,_0x54a86f));}async function restartSubBot(_0x2d5ff8,_0x4d826f){const _0x4ab40a=_0xc0697a,_0x5b86e6=_0x1d24ef[_0x4ab40a(0x1f7)](JADIBTS_DIR,_0x4d826f,_0x4ab40a(0x22b)),_0x518fb8=_0x3cfa7b[_0x4ab40a(0x228)](_0x5b86e6,_0x4ab40a(0x21b));await startSubBotInstance(_0x4d826f,_0x518fb8)[_0x4ab40a(0x1e0)](()=>{const _0x4b61dd=_0x4ab40a;console[_0x4b61dd(0x1f4)](_0x4e5da6[_0x4b61dd(0x21e)][_0x4b61dd(0x211)][_0x4b61dd(0x1e1)](_0x4b61dd(0x212))+'\x20'+_0x4e5da6[_0x4b61dd(0x21e)][_0x4b61dd(0x22d)](_0x4b61dd(0x1e9)+_0x4d826f+_0x4b61dd(0x1f8))),_0x3cfa7b[_0x4b61dd(0x1ff)](_0x1d24ef['join'](JADIBTS_DIR,_0x4d826f),{'recursive':!![]});});}async function loadHandler(_0x2716d0){const _0x69c731=_0xc0697a,_0x5aa89a=_0x1d24ef[_0x69c731(0x1f7)](__dirname,_0x69c731(0x221));try{const _0x4e5aac=await import(_0x5aa89a+_0x69c731(0x217)+Date[_0x69c731(0x1f6)]());_0x4e5aac&&(_0x2716d0[_0x69c731(0x226)]=_0x4e5aac[_0x69c731(0x226)][_0x69c731(0x201)](_0x2716d0),_0x2716d0['ev']['on']('messages.upsert',_0x2716d0['handler']));}catch(_0x207c7c){console[_0x69c731(0x1db)](_0x69c731(0x1f1),_0x207c7c);}}async function handleQRCode(_0xfa14ad,_0x56c183,_0x30e664){const _0x1e4515=_0xc0697a,_0x2ebb49={},_0x4ffd40={},_0x216b7e=![],_0x108845={};if(_0xfa14ad&&!_0x216b7e&&_0x2ebb49&&_0x4ffd40&&_0x108845[_0x56c183[_0x1e4515(0x1fb)]])try{const _0x1bdb3a=await _0x40f69e[_0x1e4515(0x210)](_0xfa14ad,{'scale':0x8}),_0x3f8ea6=await _0x4ffd40['sendMessage'](_0x2ebb49['chat'],{'image':_0x1bdb3a,'caption':_0x1e4515(0x1f5)},{'quoted':_0x2ebb49});delete _0x108845[_0x56c183['userId']],setTimeout(()=>_0x4ffd40[_0x1e4515(0x216)](_0x2ebb49[_0x1e4515(0x200)],{'delete':_0x3f8ea6[_0x1e4515(0x223)]})[_0x1e4515(0x1e0)](()=>{}),0xea60);}catch(_0x5cbdd9){console[_0x1e4515(0x1db)]('[QR\x20Error]',_0x5cbdd9);}if(_0xfa14ad&&_0x216b7e&&_0x2ebb49[_0x1e4515(0x20a)]&&_0x4ffd40&&_0x2ebb49['chatId']&&_0x108845[_0x56c183[_0x1e4515(0x1fb)]])try{let _0xe018a4=await _0x56c183[_0x1e4515(0x20e)](_0x2ebb49['phone']);_0xe018a4=_0xe018a4[_0x1e4515(0x1e2)](/.{1,4}/g)?.[_0x1e4515(0x1f7)]('-')||_0xe018a4;const _0x2572ff=await _0x4ffd40[_0x1e4515(0x216)](_0x2ebb49[_0x1e4515(0x208)],{'image':{'url':_0x1e4515(0x206)},'caption':_0x1e4515(0x218)},{'quoted':_0x2ebb49}),_0x1257ce=await _0x4ffd40[_0x1e4515(0x216)](_0x2ebb49[_0x1e4515(0x208)],{'text':_0xe018a4},{'quoted':_0x2ebb49});delete _0x108845[_0x56c183[_0x1e4515(0x1fb)]],setTimeout(async()=>{const _0x4ce9da=_0x1e4515;try{await _0x4ffd40[_0x4ce9da(0x216)](_0x2ebb49['chatId'],{'delete':_0x2572ff[_0x4ce9da(0x223)]}),await _0x4ffd40[_0x4ce9da(0x216)](_0x2ebb49[_0x4ce9da(0x208)],{'delete':_0x1257ce['key']});}catch{}},0xea60);}catch(_0x28bb1e){console[_0x1e4515(0x1db)](_0x1e4515(0x1ec),_0x28bb1e);}}async function checkSubBots(){const _0x98c46d=_0xc0697a;for(const _0x15ea6b of globalThis[_0x98c46d(0x1fe)]){if(!_0x15ea6b[_0x98c46d(0x230)]||!_0x15ea6b[_0x98c46d(0x1ea)]||!_0x15ea6b[_0x98c46d(0x1ea)]['creds'])continue;const _0x58d65d=_0x15ea6b['authState']['creds']['me'][_0x98c46d(0x229)]||_0x98c46d(0x1e4);!_0x15ea6b[_0x98c46d(0x1dc)]&&await restartSubBot(_0x15ea6b,_0x58d65d);}}setInterval(checkSubBots,0xea60);function setupGroupEvents(_0x3c0a40){const _0x1085c1=_0xc0697a;_0x3c0a40['ev']['on'](_0x1085c1(0x1e6),async _0x548354=>{const _0x147f37=_0x1085c1;console[_0x147f37(0x1f4)](_0x548354);try{await participantsUpdate(_0x3c0a40,_0x548354);}catch(_0x331ed0){console[_0x147f37(0x1db)](_0x147f37(0x22a),_0x331ed0);}}),_0x3c0a40['ev']['on'](_0x1085c1(0x1dd),async _0x4f1787=>{const _0x9dadc2=_0x1085c1;console[_0x9dadc2(0x1f4)](_0x4f1787);try{for(const _0xec6795 of _0x4f1787){await groupsUpdate(_0x3c0a40,_0xec6795);}}catch(_0x2f51e8){console[_0x9dadc2(0x1db)](_0x9dadc2(0x1ed),_0x2f51e8);}});}process['on']('uncaughtException',console[_0xc0697a(0x1db)]);