/* 
────────────────────────────

 ❒ Tipo › Sistema de Autoconexión de Subbots
 ✎ Desarrollado por › DevAlexJs
 ✎ GitHub › https://github.com/DevAlexJs
 ✎ Página Oficial › https://stellarwa.xyz  

────────────────────────────
*/

const _0x585ab8=_0xc58c;(function(_0x526229,_0x57b94e){const _0x1cae63=_0xc58c,_0x59fce5=_0x526229();while(!![]){try{const _0x840215=-parseInt(_0x1cae63(0x195))/0x1+parseInt(_0x1cae63(0x194))/0x2*(-parseInt(_0x1cae63(0x181))/0x3)+parseInt(_0x1cae63(0x179))/0x4*(parseInt(_0x1cae63(0x19b))/0x5)+parseInt(_0x1cae63(0x1a9))/0x6*(-parseInt(_0x1cae63(0x16e))/0x7)+parseInt(_0x1cae63(0x18a))/0x8*(parseInt(_0x1cae63(0x193))/0x9)+parseInt(_0x1cae63(0x15d))/0xa*(parseInt(_0x1cae63(0x18e))/0xb)+-parseInt(_0x1cae63(0x190))/0xc*(-parseInt(_0x1cae63(0x17e))/0xd);if(_0x840215===_0x57b94e)break;else _0x59fce5['push'](_0x59fce5['shift']());}catch(_0x259481){_0x59fce5['push'](_0x59fce5['shift']());}}}(_0xddd2,0x6ca2f));import{DisconnectReason,useMultiFileAuthState,fetchLatestBaileysVersion,makeCacheableSignalKeyStore,jidNormalizedUser,Browsers}from'@whiskeysockets/baileys';import _0x9e80ec from'fs';function _0xddd2(){const _0x2bfb18=['10EzAcWh','bgGreen','connection.update','creds','Intentando\x20reconectar\x20a\x20','loggedOut','?update=','badSession','\x20conectado\x20con\x20éxito','authState','bgRed','rmdirSync','messages.upsert','utf-8','\x20conectado\x20correctamente','Sub-bot\x20','readFileSync','1973881qUBQDw','conns','close','Desconocido','join','message','output','../handler.js','Conexión\x20cerrada\x20para\x20','...','push','2787436tcRqTE',',\x20eliminando\x20la\x20sesión.','WARNING:','payload','connectionClosed','10240334rSNOmc','keys','cyanBright','59529QdRygF','handler','fstop','Desktop','remoteJid','parse','whiteBright','Error\x20en\x20startSub:','No\x20hay\x20credenciales\x20para\x20','760zNwMcV','bold','statusCode','connectionLost','3300671oNagHr','INFO:','12OxBTQI','dirname','bind','21969QYehhu','34pBfGLI','388278zRRCCk','silent',',\x20se\x20eliminará\x20la\x20sesión.','../../','includes','now','5MrFWlT','open','\x20desconectado\x20por\x20razón\x20desconocida:\x20','creds.json','macOS','isInit','timedOut','user','Iniciando\x20sub-bot\x20','readdirSync','jid','Error\x20al\x20conectar\x20','existsSync','No\x20hay\x20sub-bots\x20previamente\x20conectados','18GelHha','loadMessage','removeAllListeners','error','log'];_0xddd2=function(){return _0x2bfb18;};return _0xddd2();}import _0x291b26 from'chalk';import _0x5d427d from'pino';import _0x3790bd from'path';import{fileURLToPath}from'url';import{makeWASocket}from'./simple.js';function _0xc58c(_0x10d80a,_0x54c55d){const _0xddd232=_0xddd2();return _0xc58c=function(_0xc58c4e,_0x36f721){_0xc58c4e=_0xc58c4e-0x15c;let _0x3d7992=_0xddd232[_0xc58c4e];return _0x3d7992;},_0xc58c(_0x10d80a,_0x54c55d);}import _0x1a99d5 from'./store.js';const __filename=fileURLToPath(import.meta['url']),__dirname=_0x3790bd[_0x585ab8(0x191)](__filename),JADIBTS_DIR=_0x3790bd['join'](__dirname,_0x585ab8(0x198)+jadi);globalThis['conns']=globalThis[_0x585ab8(0x16f)]||[];export async function startSub(){const _0x5eae8d=_0x585ab8;try{if(!_0x9e80ec[_0x5eae8d(0x1a7)](JADIBTS_DIR)){console['log'](_0x291b26[_0x5eae8d(0x18b)][_0x5eae8d(0x187)][_0x5eae8d(0x167)](_0x5eae8d(0x17b))+'\x20'+_0x291b26[_0x5eae8d(0x18b)][_0x5eae8d(0x180)](_0x5eae8d(0x1a8)));return;}const _0x9cee09=_0x9e80ec[_0x5eae8d(0x1a4)](JADIBTS_DIR);for(const _0x22b94b of _0x9cee09){await startSubBotIfValid(_0x22b94b);}}catch(_0x3e0aa8){console[_0x5eae8d(0x1ac)](_0x5eae8d(0x188),_0x3e0aa8);}}async function startSubBotIfValid(_0x49d029){const _0x268668=_0x585ab8;try{const _0x14a288=_0x3790bd[_0x268668(0x172)](JADIBTS_DIR,_0x49d029,'creds.json');if(!_0x9e80ec[_0x268668(0x1a7)](_0x14a288)){console['log'](_0x291b26[_0x268668(0x18b)][_0x268668(0x187)][_0x268668(0x167)](_0x268668(0x17b))+'\x20'+_0x291b26[_0x268668(0x18b)][_0x268668(0x180)](_0x268668(0x189)+_0x49d029));return;}const _0xe729e9=_0x9e80ec[_0x268668(0x16d)](_0x14a288,_0x268668(0x16a)),_0x3a6056=JSON[_0x268668(0x186)](_0xe729e9);if(_0x3a6056[_0x268668(0x183)]){console['log'](_0x291b26['bold'][_0x268668(0x187)][_0x268668(0x167)](_0x268668(0x17b))+'\x20'+_0x291b26[_0x268668(0x18b)][_0x268668(0x180)](_0x268668(0x16c)+_0x49d029+'\x20marcado\x20para\x20no\x20iniciar\x20(fstop)'));return;}console[_0x268668(0x15c)](_0x291b26[_0x268668(0x18b)]['whiteBright']['bgGreen']('INFO:')+'\x20'+_0x291b26[_0x268668(0x18b)]['cyanBright'](_0x268668(0x1a3)+_0x49d029)),await startSubBot(_0x49d029,_0xe729e9);}catch(_0x57ec99){console[_0x268668(0x1ac)](_0x291b26['bold']['whiteBright'][_0x268668(0x167)](_0x268668(0x17b))+'\x20'+_0x291b26[_0x268668(0x18b)][_0x268668(0x180)]('Error\x20al\x20iniciar\x20sub-bot\x20'+_0x49d029));}}async function startSubBot(_0x3ed356,_0x232041){const _0xe54d3c=_0x585ab8,_0x59d65d=_0x3790bd[_0xe54d3c(0x172)](JADIBTS_DIR,_0x3ed356),{state:_0x96be8d,saveState:_0x685d60}=await useMultiFileAuthState(_0x59d65d),_0x4d15c4=makeCacheableSignalKeyStore(_0x96be8d[_0xe54d3c(0x17f)],_0x5d427d({'level':'silent'})),{version:_0xaf7289}=await fetchLatestBaileysVersion(),_0x1b6760={'auth':{'creds':_0x96be8d[_0xe54d3c(0x160)],'keys':_0x4d15c4},'waWebSocketUrl':'wss://web.whatsapp.com/ws/chat?ED=CAIICA','logger':_0x5d427d({'level':_0xe54d3c(0x196)}),'browser':Browsers[_0xe54d3c(0x19f)](_0xe54d3c(0x184)),'markOnlineOnConnect':!![],'generateHighQualityLinkPreview':!![],'getMessage':async _0x1c3b93=>{const _0x6c62a0=_0xe54d3c,_0x2291ce=jidNormalizedUser(_0x1c3b93[_0x6c62a0(0x185)]);return await _0x1a99d5[_0x6c62a0(0x1aa)](_0x2291ce,_0x1c3b93['id'])?.[_0x6c62a0(0x173)]||'';},'version':_0xaf7289};let _0x215a01=makeWASocket(_0x1b6760);_0x215a01['isInit']=![],_0x215a01['ev']['on'](_0xe54d3c(0x15f),_0x447fb9=>handleConnectionUpdate(_0x215a01,_0x447fb9,_0x3ed356)),setInterval(async()=>{const _0xe29978=_0xe54d3c;if(!_0x215a01[_0xe29978(0x1a2)])try{_0x215a01['ws'][_0xe29978(0x170)](),_0x215a01['ev'][_0xe29978(0x1ab)](),globalThis[_0xe29978(0x16f)]=globalThis[_0xe29978(0x16f)]['filter'](_0x10cd2f=>_0x10cd2f!==_0x215a01);}catch{}},0xea60),await loadHandler(_0x215a01),console[_0xe54d3c(0x15c)](_0x291b26[_0xe54d3c(0x18b)][_0xe54d3c(0x187)][_0xe54d3c(0x15e)]('INFO:')+'\x20'+_0x291b26['bold'][_0xe54d3c(0x180)](_0x3ed356+_0xe54d3c(0x165))),globalThis['conns'][_0xe54d3c(0x178)](_0x215a01);}async function handleConnectionUpdate(_0xf4c1a1,_0x59d62a,_0x20b185){const _0x2342ca=_0x585ab8,{connection:_0x5ca8db,lastDisconnect:_0x57bf66,isNewLogin:_0x19bf00}=_0x59d62a;_0x19bf00&&(_0xf4c1a1[_0x2342ca(0x1a0)]=![]);if(_0x5ca8db===_0x2342ca(0x170))await handleDisconnect(_0x57bf66,_0xf4c1a1,_0x20b185);else _0x5ca8db===_0x2342ca(0x19c)&&(_0xf4c1a1[_0x2342ca(0x1a0)]=!![],console[_0x2342ca(0x15c)](_0x291b26[_0x2342ca(0x18b)][_0x2342ca(0x187)][_0x2342ca(0x15e)](_0x2342ca(0x18f))+'\x20'+_0x291b26[_0x2342ca(0x18b)]['cyanBright'](_0x20b185+_0x2342ca(0x16b))));}async function handleDisconnect(_0xf0e160,_0x2f2231,_0x47a4ec){const _0x8fbecc=_0x585ab8,_0x203a66=_0xf0e160?.[_0x8fbecc(0x1ac)]?.[_0x8fbecc(0x174)]?.['statusCode']||_0xf0e160?.[_0x8fbecc(0x1ac)]?.[_0x8fbecc(0x174)]?.[_0x8fbecc(0x17c)]?.[_0x8fbecc(0x18c)];if([DisconnectReason[_0x8fbecc(0x164)],0x194,0x193,0x195,0x191,DisconnectReason[_0x8fbecc(0x162)]][_0x8fbecc(0x199)](_0x203a66))console[_0x8fbecc(0x15c)](_0x291b26[_0x8fbecc(0x18b)][_0x8fbecc(0x187)]['bgRed']('WARNING:')+'\x20'+_0x291b26[_0x8fbecc(0x18b)][_0x8fbecc(0x180)](_0x8fbecc(0x176)+_0x47a4ec+_0x8fbecc(0x197))),_0x9e80ec['rmdirSync'](_0x3790bd[_0x8fbecc(0x172)](JADIBTS_DIR,_0x47a4ec),{'recursive':!![]});else[0x1ac,DisconnectReason[_0x8fbecc(0x1a1)],DisconnectReason[_0x8fbecc(0x17d)],DisconnectReason[_0x8fbecc(0x18d)],0x1b8,0x198]['includes'](_0x203a66)?(console['log']('\x0a'+_0x291b26['bold'][_0x8fbecc(0x187)][_0x8fbecc(0x167)]('WARNING:')+'\x20'+_0x291b26[_0x8fbecc(0x18b)][_0x8fbecc(0x180)](_0x8fbecc(0x161)+_0x47a4ec+_0x8fbecc(0x177))),await restartSubBot(_0x2f2231,_0x47a4ec)):(console[_0x8fbecc(0x15c)](_0x291b26[_0x8fbecc(0x18b)][_0x8fbecc(0x187)][_0x8fbecc(0x167)](_0x8fbecc(0x17b))+'\x20'+_0x291b26['bold'][_0x8fbecc(0x180)](_0x47a4ec+_0x8fbecc(0x19d)+_0x203a66)),await restartSubBot(_0x2f2231,_0x47a4ec));}async function restartSubBot(_0x35e133,_0x2578ca){const _0x4beea0=_0x585ab8,_0x1f7375=_0x3790bd['join'](JADIBTS_DIR,_0x2578ca,_0x4beea0(0x19e)),_0x18aa4c=_0x9e80ec[_0x4beea0(0x16d)](_0x1f7375,_0x4beea0(0x16a));await startSubBot(_0x2578ca,_0x18aa4c)['catch'](()=>{const _0x10a47a=_0x4beea0;console['log'](_0x291b26[_0x10a47a(0x18b)][_0x10a47a(0x187)][_0x10a47a(0x167)](_0x10a47a(0x17b))+'\x20'+_0x291b26[_0x10a47a(0x18b)]['cyanBright'](_0x10a47a(0x1a6)+_0x2578ca+_0x10a47a(0x17a))),_0x9e80ec[_0x10a47a(0x168)](_0x3790bd['join'](JADIBTS_DIR,_0x2578ca),{'recursive':!![]});});}async function loadHandler(_0xb57cb1){const _0x33196a=_0x585ab8,_0x8d48a3=_0x3790bd['join'](__dirname,_0x33196a(0x175));try{const _0x5e8499=await import(_0x8d48a3+_0x33196a(0x163)+Date[_0x33196a(0x19a)]());_0x5e8499&&(_0xb57cb1[_0x33196a(0x182)]=_0x5e8499[_0x33196a(0x182)][_0x33196a(0x192)](_0xb57cb1),_0xb57cb1['ev']['on'](_0x33196a(0x169),_0xb57cb1[_0x33196a(0x182)]));}catch(_0x442009){console[_0x33196a(0x1ac)]('Error\x20en\x20el\x20handler:',_0x442009);}}async function checkSubBots(){const _0x17ded4=_0x585ab8;for(const _0x27f627 of globalThis[_0x17ded4(0x16f)]){if(!_0x27f627[_0x17ded4(0x1a2)]||!_0x27f627[_0x17ded4(0x166)]||!_0x27f627[_0x17ded4(0x166)][_0x17ded4(0x160)])continue;const _0x30b264=_0x27f627['authState'][_0x17ded4(0x160)]['me'][_0x17ded4(0x1a5)]||_0x17ded4(0x171);!_0x27f627[_0x17ded4(0x1a0)]&&await restartSubBot(_0x27f627,_0x30b264);}}setInterval(checkSubBots,0xea60);