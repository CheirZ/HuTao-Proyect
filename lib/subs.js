/* 
────────────────────────────

 ❒ Tipo › Sistema de Autoconexión de Subbots
 ✎ Desarrollado por › DevAlexJs
 ✎ GitHub › https://github.com/DevAlexJs
 ✎ Página Oficial › https://stellarwa.xyz  

────────────────────────────
*/

const _0x452aa6=_0x46fd;(function(_0x4741a0,_0x531281){const _0x3be660=_0x46fd,_0x34c520=_0x4741a0();while(!![]){try{const _0x4352d2=-parseInt(_0x3be660(0xe1))/0x1+-parseInt(_0x3be660(0xd4))/0x2*(parseInt(_0x3be660(0xfd))/0x3)+parseInt(_0x3be660(0xce))/0x4*(parseInt(_0x3be660(0xdc))/0x5)+-parseInt(_0x3be660(0xcf))/0x6+-parseInt(_0x3be660(0xf1))/0x7*(-parseInt(_0x3be660(0xea))/0x8)+parseInt(_0x3be660(0xbe))/0x9+parseInt(_0x3be660(0xbb))/0xa*(parseInt(_0x3be660(0xfc))/0xb);if(_0x4352d2===_0x531281)break;else _0x34c520['push'](_0x34c520['shift']());}catch(_0x5dea6c){_0x34c520['push'](_0x34c520['shift']());}}}(_0x5041,0xd8388));import{DisconnectReason,useMultiFileAuthState,fetchLatestBaileysVersion,makeCacheableSignalKeyStore,jidNormalizedUser,Browsers}from'@whiskeysockets/baileys';import _0x27f41b from'fs';function _0x46fd(_0x33b679,_0x296ab8){const _0x504164=_0x5041();return _0x46fd=function(_0x46fd81,_0xede8c7){_0x46fd81=_0x46fd81-0xba;let _0x83ae55=_0x504164[_0x46fd81];return _0x83ae55;},_0x46fd(_0x33b679,_0x296ab8);}import _0x27c603 from'chalk';import _0x3435e8 from'pino';import _0x43adb4 from'path';import{fileURLToPath}from'url';import{makeWASocket}from'./simple.js';import _0x1cf830 from'./store.js';function _0x5041(){const _0x46c9af=['catch','Intentando\x20reconectar\x20a\x20','1859YLpOKf','2427ufipNA','open','bgRed','Error\x20al\x20iniciar\x20sub-bot\x20','Desconocido','removeAllListeners','log','macOS','206750IrKKIW','WARNING:',',\x20eliminando\x20la\x20sesión.','3153420UErXSK','bgGreen','isInit','INFO:','Desktop','statusCode','remoteJid','creds.json','close','Error\x20en\x20startSub:','bold','join','readFileSync','cyanBright','wss://web.whatsapp.com/ws/chat?ED=CAIICA','fstop','1492924vpqddx','10525032bBNHKt','url','error','No\x20hay\x20sub-bots\x20previamente\x20conectados','whiteBright','2972LaTSRk','payload','existsSync','...','Error\x20en\x20el\x20handler:','connection.update','output','badSession','15TiMqwv','creds','filter','utf-8','keys','1650943QjIfFn','dirname','parse','authState','handler','message','../','connectionLost','now','8pgTPue','Sub-bot\x20','silent','conns','Error\x20al\x20conectar\x20','Iniciando\x20sub-bot\x20','\x20desconectado\x20por\x20razón\x20desconocida:\x20','3701467KhSqbo','../handler.js','\x20conectado\x20con\x20éxito','includes','\x20marcado\x20para\x20no\x20iniciar\x20(fstop)','readdirSync','user','bind','rmdirSync'];_0x5041=function(){return _0x46c9af;};return _0x5041();}const __filename=fileURLToPath(import.meta[_0x452aa6(0xd0)]),__dirname=_0x43adb4[_0x452aa6(0xe2)](__filename),JADIBTS_DIR=_0x43adb4[_0x452aa6(0xc9)](__dirname,_0x452aa6(0xe7)+jadi);globalThis[_0x452aa6(0xed)]=globalThis['conns']||[];export async function startSub(){const _0x153af5=_0x452aa6;try{if(!_0x27f41b[_0x153af5(0xd6)](JADIBTS_DIR)){console[_0x153af5(0x103)](_0x27c603[_0x153af5(0xc8)][_0x153af5(0xd3)][_0x153af5(0xff)]('WARNING:')+'\x20'+_0x27c603['bold'][_0x153af5(0xcb)](_0x153af5(0xd2)));return;}const _0x1b94db=_0x27f41b[_0x153af5(0xf6)](JADIBTS_DIR);for(const _0x120fd1 of _0x1b94db){await startSubBotIfValid(_0x120fd1);}}catch(_0x9c01a9){console[_0x153af5(0xd1)](_0x153af5(0xc7),_0x9c01a9);}}async function startSubBotIfValid(_0x6102dd){const _0x3e5e89=_0x452aa6;try{const _0x58f4d7=_0x43adb4[_0x3e5e89(0xc9)](JADIBTS_DIR,_0x6102dd,_0x3e5e89(0xc5));if(!_0x27f41b['existsSync'](_0x58f4d7)){console[_0x3e5e89(0x103)](_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xd3)]['bgRed'](_0x3e5e89(0xbc))+'\x20'+_0x27c603[_0x3e5e89(0xc8)]['cyanBright']('No\x20hay\x20credenciales\x20para\x20'+_0x6102dd));return;}const _0x2b4490=_0x27f41b[_0x3e5e89(0xca)](_0x58f4d7,_0x3e5e89(0xdf)),_0x11d741=JSON[_0x3e5e89(0xe3)](_0x2b4490);if(_0x11d741[_0x3e5e89(0xcd)]){console[_0x3e5e89(0x103)](_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xd3)][_0x3e5e89(0xff)](_0x3e5e89(0xbc))+'\x20'+_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xcb)](_0x3e5e89(0xeb)+_0x6102dd+_0x3e5e89(0xf5)));return;}console['log'](_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xd3)][_0x3e5e89(0xbf)](_0x3e5e89(0xc1))+'\x20'+_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xcb)](_0x3e5e89(0xef)+_0x6102dd)),await startSubBot(_0x6102dd,_0x2b4490);}catch(_0x247a18){console[_0x3e5e89(0xd1)](_0x27c603[_0x3e5e89(0xc8)][_0x3e5e89(0xd3)][_0x3e5e89(0xff)]('WARNING:')+'\x20'+_0x27c603['bold'][_0x3e5e89(0xcb)](_0x3e5e89(0x100)+_0x6102dd));}}async function startSubBot(_0x2c9f4e,_0x2215c7){const _0x59786c=_0x452aa6,_0x1f1076=_0x43adb4[_0x59786c(0xc9)](JADIBTS_DIR,_0x2c9f4e),{state:_0x5a4567,saveState:_0xdff00}=await useMultiFileAuthState(_0x1f1076),_0x4de8b9=makeCacheableSignalKeyStore(_0x5a4567[_0x59786c(0xe0)],_0x3435e8({'level':_0x59786c(0xec)})),{version:_0x5bc273}=await fetchLatestBaileysVersion(),_0x491129={'auth':{'creds':_0x5a4567[_0x59786c(0xdd)],'keys':_0x4de8b9},'waWebSocketUrl':_0x59786c(0xcc),'logger':_0x3435e8({'level':_0x59786c(0xec)}),'browser':Browsers[_0x59786c(0xba)](_0x59786c(0xc2)),'markOnlineOnConnect':!![],'generateHighQualityLinkPreview':!![],'getMessage':async _0x3dfd8c=>{const _0x3541a4=_0x59786c,_0x13c3e5=jidNormalizedUser(_0x3dfd8c[_0x3541a4(0xc4)]);return await _0x1cf830['loadMessage'](_0x13c3e5,_0x3dfd8c['id'])?.[_0x3541a4(0xe6)]||'';},'version':_0x5bc273};let _0x2ed9bd=makeWASocket(_0x491129);_0x2ed9bd[_0x59786c(0xc0)]=![],_0x2ed9bd['ev']['on'](_0x59786c(0xd9),_0x4db53e=>handleConnectionUpdate(_0x2ed9bd,_0x4db53e,_0x2c9f4e)),setInterval(async()=>{const _0x1c85ca=_0x59786c;if(!_0x2ed9bd['user'])try{_0x2ed9bd['ws'][_0x1c85ca(0xc6)](),_0x2ed9bd['ev'][_0x1c85ca(0x102)](),globalThis[_0x1c85ca(0xed)]=globalThis[_0x1c85ca(0xed)][_0x1c85ca(0xde)](_0x522908=>_0x522908!==_0x2ed9bd);}catch{}},0xea60),await loadHandler(_0x2ed9bd),console[_0x59786c(0x103)](_0x27c603['bold'][_0x59786c(0xd3)][_0x59786c(0xbf)](_0x59786c(0xc1))+'\x20'+_0x27c603[_0x59786c(0xc8)]['cyanBright'](_0x2c9f4e+_0x59786c(0xf3))),globalThis['conns']['push'](_0x2ed9bd);}async function handleConnectionUpdate(_0x352894,_0x3331db,_0x23e94f){const _0x271363=_0x452aa6,{connection:_0x18e9ac,lastDisconnect:_0xee4924,isNewLogin:_0x4a9a6}=_0x3331db;_0x4a9a6&&(_0x352894[_0x271363(0xc0)]=![]);if(_0x18e9ac===_0x271363(0xc6))await handleDisconnect(_0xee4924,_0x352894,_0x23e94f);else _0x18e9ac===_0x271363(0xfe)&&(_0x352894['isInit']=!![],console[_0x271363(0x103)](_0x27c603[_0x271363(0xc8)][_0x271363(0xd3)]['bgGreen']('INFO:')+'\x20'+_0x27c603[_0x271363(0xc8)][_0x271363(0xcb)](_0x23e94f+'\x20conectado\x20correctamente')));}async function handleDisconnect(_0x3c29f5,_0x25943c,_0x6ffd52){const _0x138ee6=_0x452aa6,_0x2c0839=_0x3c29f5?.[_0x138ee6(0xd1)]?.[_0x138ee6(0xda)]?.['statusCode']||_0x3c29f5?.[_0x138ee6(0xd1)]?.[_0x138ee6(0xda)]?.[_0x138ee6(0xd5)]?.[_0x138ee6(0xc3)];if([DisconnectReason[_0x138ee6(0xdb)],0x194,0x193,0x195,0x191,DisconnectReason['loggedOut']][_0x138ee6(0xf4)](_0x2c0839))console[_0x138ee6(0x103)](_0x27c603['bold'][_0x138ee6(0xd3)][_0x138ee6(0xff)](_0x138ee6(0xbc))+'\x20'+_0x27c603[_0x138ee6(0xc8)][_0x138ee6(0xcb)]('Conexión\x20cerrada\x20para\x20'+_0x6ffd52+',\x20se\x20eliminará\x20la\x20sesión.')),_0x27f41b[_0x138ee6(0xf9)](_0x43adb4[_0x138ee6(0xc9)](JADIBTS_DIR,_0x6ffd52),{'recursive':!![]});else[0x1ac,DisconnectReason['timedOut'],DisconnectReason['connectionClosed'],DisconnectReason[_0x138ee6(0xe8)],0x1b8,0x198][_0x138ee6(0xf4)](_0x2c0839)?(console[_0x138ee6(0x103)]('\x0a'+_0x27c603[_0x138ee6(0xc8)][_0x138ee6(0xd3)]['bgRed'](_0x138ee6(0xbc))+'\x20'+_0x27c603[_0x138ee6(0xc8)][_0x138ee6(0xcb)](_0x138ee6(0xfb)+_0x6ffd52+_0x138ee6(0xd7))),await restartSubBot(_0x25943c,_0x6ffd52)):(console[_0x138ee6(0x103)](_0x27c603[_0x138ee6(0xc8)][_0x138ee6(0xd3)][_0x138ee6(0xff)](_0x138ee6(0xbc))+'\x20'+_0x27c603['bold']['cyanBright'](_0x6ffd52+_0x138ee6(0xf0)+_0x2c0839)),await restartSubBot(_0x25943c,_0x6ffd52));}async function restartSubBot(_0x5e5d97,_0x27693a){const _0x5982da=_0x452aa6,_0xb0388=_0x43adb4[_0x5982da(0xc9)](JADIBTS_DIR,_0x27693a,_0x5982da(0xc5)),_0x3989bb=_0x27f41b[_0x5982da(0xca)](_0xb0388,_0x5982da(0xdf));await startSubBot(_0x27693a,_0x3989bb)[_0x5982da(0xfa)](()=>{const _0x2029a6=_0x5982da;console[_0x2029a6(0x103)](_0x27c603['bold'][_0x2029a6(0xd3)][_0x2029a6(0xff)]('WARNING:')+'\x20'+_0x27c603[_0x2029a6(0xc8)][_0x2029a6(0xcb)](_0x2029a6(0xee)+_0x27693a+_0x2029a6(0xbd))),_0x27f41b[_0x2029a6(0xf9)](_0x43adb4[_0x2029a6(0xc9)](JADIBTS_DIR,_0x27693a),{'recursive':!![]});});}async function loadHandler(_0x3a5635){const _0x16bb5d=_0x452aa6,_0x3ceb61=_0x43adb4[_0x16bb5d(0xc9)](__dirname,_0x16bb5d(0xf2));try{const _0xd52eb4=await import(_0x3ceb61+'?update='+Date[_0x16bb5d(0xe9)]());_0xd52eb4&&(_0x3a5635[_0x16bb5d(0xe5)]=_0xd52eb4[_0x16bb5d(0xe5)][_0x16bb5d(0xf8)](_0x3a5635),_0x3a5635['ev']['on']('messages.upsert',_0x3a5635['handler']));}catch(_0x321719){console['error'](_0x16bb5d(0xd8),_0x321719);}}async function checkSubBots(){const _0xfe4c49=_0x452aa6;for(const _0x1341ad of globalThis[_0xfe4c49(0xed)]){if(!_0x1341ad[_0xfe4c49(0xf7)]||!_0x1341ad[_0xfe4c49(0xe4)]||!_0x1341ad['authState']['creds'])continue;const _0xade8b5=_0x1341ad[_0xfe4c49(0xe4)][_0xfe4c49(0xdd)]['me']['jid']||_0xfe4c49(0x101);!_0x1341ad['isInit']&&await restartSubBot(_0x1341ad,_0xade8b5);}}setInterval(checkSubBots,0xea60);